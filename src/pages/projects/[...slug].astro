---
import { getCollection } from 'astro:content';
import Base from "../../layouts/Base.astro"

export async function getStaticPaths() {
  const project = await getCollection('project');
  return project.map(entry => ({
    params: { slug: entry.slug }, props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
console.log("entry is ", entry)
console.log("content is ", Content)
---

<Base>
    <section class="wrapper style1">
        <div class="container">
            <div class="row gtr-200">
                <div class="col-3 col-12-narrower">

                    <div id="sidebar">
                            <section>
                                <h3>Summary</h3>
                                <p>Principal investigator: <code>entry.data.pi</code></p>
                                <p>Funders: <code>entry.data.funders</code></p>
                                <footer>
                                </footer>
                            </section>

                            <section>
                                <h3>Quick links</h3>
                                <ul class="links">
                                    <li><a href={entry.data.github}>GitHub repository</a></li>
                                    <li><a href={entry.data.link}>Web app</a></li>
                                </ul>
                            </section>

                    </div>
                </div>

                <div class="col-9  col-12-narrower imp-narrower">
                    <div id="content">
                            <article>
                                <header>
                                    <h2>{entry.data.name}</h2>
                                    <p>{entry.data.description}</p>
                                </header>
                                <Content/>

                            </article>
                    </div>
                </div>
            </div>
        </div>
    </section>
</Base>
